---
title: "1 - Setting up a connection"
tags: ""
---

接続設定<br><br>

2 台のコンピューターが通信するには、何らかの接続プロトコルが必要です。<br>

ほとんどのゲームと同様に、Game Maker は、IPX、TCP/IP、モデム、およびシリアルの 4 種類の接続を提供します。<br>

IPX 接続 (より正確にはプロトコル) は、ほぼ完全に透過的です。<br>

同じローカル エリア ネットワーク上の他のユーザーとゲームをプレイするために使用できます。<br>
使用するには、コンピュータにインストールする必要があります。<br>
(動作しない場合は、Windows のドキュメントを参照してください。<br>
または、Windows のコントロール パネルの [ネットワーク] 項目に移動して、<br>
IPX プロトコルを追加してください。)<br>

TCP/IP はインターネット プロトコルです。<br>
IPアドレスを知っていれば、インターネット上のどこにいても他のプレイヤーと遊ぶことができます。<br>

ローカル ネットワークでは、アドレスを指定せずに使用できます。<br>
モデム接続はモデム経由で行われます。<br>

それを使用するには、いくつかのモデム設定 (初期化文字列と電話番号) を提供する必要があります。<br>

最後に、シリアル回線 (コンピュータ間の直接接続) を使用する場合、<br>
いくつかのポート設定を提供する必要があります。<br>

これらの接続を初期化するために使用できる GML 関数は 4 つあります。

・`mplay_init_ipx() `<br>
　IPX 接続を初期化します。

・`mplay_init_tcpip(addr)`<br>
　TCP/IP 接続を初期化します。<br>
　addr は、Web アドレスまたは IP アドレスを含む文字列です。 <br>
　'www.gameplay.com' または '123.123.123.12' の後にポート番号が続く場合があります (例: ':12')。

セッションに参加する場合 (下記参照) のみ、アドレスを提供する必要があります。<br>
ローカル エリア ネットワークでは、アドレスは必要ありません。<br>

・`mplay_init_modem(initstr,phonenr) `<br>
　モデム接続を初期化します。 <br>
　initstr は、モデムの初期化文字列です (空にすることもできます)。<br>
　phonenr は、呼び出す電話番号を含む文字列です (例: '0201234567')。<br>

セッションに参加する場合 (下記参照) のみ、電話番号を提供する必要があります。<br>

・`mplay_init_serial(portno,baudrate,stopbits,parity,flow) `<br>
　シリアル接続を初期化します。 <br>
　portno はポート番号 (1 ～ 4) です。<br>
　baudrate は、使用するボーレート (100-256K) です。<br>
　stopbits は、ストップビットの数を示します (0 = 1 ビット、1 = 1.5 ビット、2 = 2 ビット)。<br>
　parity　は、パリティを示します (0 = なし、1 = 奇数、2 = 偶数、3 = マーク)。<br>
　flow はフロー制御のタイプを示します (0=なし、1=xon/xoff、2=rts、3=dtr、4=rts および dtr)。<br>
　成功したかどうかを返します。<br>

典型的な呼び出しは `mplay_init_serial(1,57600,0,0,4)` です。<br>
ユーザーが設定を変更するためのダイアログを開くには、最初の引数として 0 を指定します。<br>

ゲームは、これらの関数のいずれかを 1 回だけ呼び出す必要があります。<br>
すべての関数は、成功したかどうかを報告します。<br>

特定のプロトコルがインストールされていないか、<br>
マシンにサポートされていない場合、これらは成功しません。<br>

成功した接続が利用可能かどうかを確認するには、次の関数を使用できます<br>

・`mplay_connect_status()` <br>
　現在の接続のステータスを返します。 <br>
　0 = 接続なし、1 = IPX 接続、2 = TCP/IP 接続、3 = モデム接続、4 = シリアル接続。<br>
<br>

接続通話を終了するには<br>

・`mplay_end()` <br>
現在の接続を終了します。

TCP/IP 接続を使用している場合、<br>
ゲームをプレイしたい相手にコンピュータの IP アドレスを伝えたい場合があります。<br>

ここでは、次の関数が役立ちます。<br>

・`mplay_ipaddress() `<br>
マシンの IP アドレス (例: '123.123.123.12') を文字列として返します。<br>

たとえば、次のことができます。<br>

これを画面のどこかに表示します。<br>
このルーチンは遅いので、常に呼び出さないでください。<br>
