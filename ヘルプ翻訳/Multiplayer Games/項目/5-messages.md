---
title: "5 - Messages"
tags: ""
---

メッセージ<br><br>

ゲーム・メーカーがサポートする 2 番目の通信メカニズムは、メッセージの送受信です。<br>

プレーヤーは、他の 1 人またはすべてのプレーヤーにメッセージを送信できます。<br>

プレイヤーは、メッセージが到着したかどうかを確認し、<br>
それに応じてアクションを実行できます。<br>

メッセージは、確実に到着する保証モード (遅くなる可能性があります) で送信することも、<br>
より高速な非保証モードで送信することもできます。<br>

次のメッセージング ルーチンが存在します。<br>

・`mplay_message_send(player,id,val)` <br>
　指定されたプレーヤーにメッセージを送信します<br>
　(識別子または名前のいずれか。<br>
　すべてのプレーヤーにメッセージを送信するには 0 を使用します)。<br>
　id は整数のメッセージ識別子で、val は値 (実数または文字列) です。<br>
　メッセージは非保証モードで送信されます。<br>
　val に文字列が含まれる場合、許容される文字列の最大長は 30000 文字です。<br>

・`mplay_message_send_guaranteed(player,id,val)` <br>
　指定されたプレーヤーにメッセージを送信します <br>
　(識別子または名前のいずれか。<br>
　メッセージをすべてのプレーヤーに送信するには 0 を使用します)。<br>
　id は整数のメッセージ識別子で、val は値 (実数または文字列) です。<br>
　これは保証された送信です。 <br>
　val に文字列が含まれる場合、許容される文字列の最大長は 30000 文字です。

・`mplay_message_receive(player) `<br>
　指定されたプレーヤー (識別子または名前) から来た<br>
　メッセージ キューから次のメッセージを受信します。<br>
　どのプレイヤーからのメッセージにも 0 を使用します。<br>
　このルーチンは、実際に新しいメッセージがあったかどうかを返します。<br>

その場合、次のルーチンを使用してその内容を取得できます。<br>

・`mplay_message_id()` <br>
　最後に受信したメッセージの識別子を返します。<br>

・`mplay_message_value()` <br>
　最後に受信したメッセージの値を返します。<br>

・`mplay_message_player()` <br>
　最後に受信したメッセージを送信したプレーヤーを返します。<br>

・`mplay_message_name()` <br>
　最後に受信したメッセージを送信したプレイヤーの名前を返します。<br>

・`mplay_message_count(player)` <br>
　プレーヤーからキューに残っているメッセージの数を返します<br>
　(すべてのメッセージをカウントするには 0 を使用します)。<br>

・`mplay_message_clear(player)` <br>
　プレーヤーからキューに残っているすべてのメッセージを削除します<br>
　(すべてのメッセージを削除するには 0 を使用します)。<br>

ここで、いくつかの注意事項が適切です。<br>

まず、特定のプレイヤーだけにメッセージを送信したい場合は、<br>
プレイヤーの一意の ID を知る必要があります。<br>

前に示したように、関数 mplay_player_id() でこれを取得できます。<br>

このプレーヤー識別子は、特定のプレーヤーからメッセージを受信するときにも使用されます。<br>
または、プレーヤーの名前を文字列として指定することもできます。<br>
複数のプレイヤーが同じ名前の場合、最初のプレイヤーのみがメッセージを受け取ります。<br>

第 2 に、各メッセージに整数の識別子が含まれている理由を疑問に思うかもしれません。<br>
これは、アプリケーションがさまざまな種類のメッセージを送信するのに役立つためです。<br>

受信者は、ID を使用してメッセージのタイプを確認し、<br>
適切なアクションを実行できます。<br>
(メッセージの到着が保証されていないため、<br>
異なるメッセージで id と値を送信すると重大な問題が発生します。)
